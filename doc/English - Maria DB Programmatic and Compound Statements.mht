MIME-Version: 1.0
Content-Location: file:///C:/D10446F3/English-MariaDBProgrammaticandCompoundStatements.htm
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html; charset="utf-8"

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office"
xmlns:dt=3D"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; charset=3Dutf-8">
<meta name=3DProgId content=3DOneNote.File>
<meta name=3DGenerator content=3D"Microsoft OneNote 14">
<link id=3DMain-File rel=3DMain-File
href=3DEnglish-MariaDBProgrammaticandCompoundStatements.htm>
<link rel=3DFile-List
href=3D"English-MariaDBProgrammaticandCompoundStatements_files/filelist.xml=
">
</head>

<body lang=3Des-US>

<div style=3D'direction:ltr;border-width:100%'>

<div style=3D'direction:ltr;margin-top:0in;margin-left:0in;width:10.3354in'>

<div style=3D'direction:ltr;margin-top:0in;margin-left:.075in;width:6.5in'>

<p style=3D'margin:0in;font-family:Arial;font-size:17.0pt' lang=3Des-419>In=
gles:
Maria DB Programmatic and Compound Statements</p>

</div>

<div style=3D'direction:ltr;margin-top:.0388in;margin-left:.075in;width:1.7=
805in'>

<p style=3D'margin:0in;font-family:Calibri;font-size:10.0pt;color:gray'
lang=3Den-US>Thursday, October 17, 2019</p>

<p style=3D'margin:0in;font-family:Calibri;font-size:10.0pt;color:gray'
lang=3Den-US>9:03 AM</p>

</div>

<div style=3D'direction:ltr;margin-top:.3284in;margin-left:0in;width:10.335=
4in'>

<p style=3D'margin:0in;font-family:Arial;font-size:16.0pt' lang=3Des-419>Pr=
ogrammatic
and Compound Statements (MariaDB) embedded in a Server Script (PHP)</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:10.=
0pt;
color:#595959' lang=3Des-419><span style=3D'font-style:italic'>Note: The co=
de shown
here is by way of example, this implementation is part of a larger project
called WEB APPLICATION FULLSTACK FRAMEWORK.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>The
following code allows to embed simple SQL instructions and / or
&quot;Programmatic and Compound Statements&quot; (in this case MariaDB V 10=
.1.x
or higher) into a sequence of a Server Script (in this case PHP). The Server
Script code would look something like this:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&lt;?php</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##------------------------------------------------------------------=
-----------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
MARIADB Programmatic and Compound Statements</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##------------------------------------------------------------------=
-----------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##--
REQUIRED TO EXECUTE PARSE MariaDB Programmatic and Compound Statements
---------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>define(&quot;RelativePath&quot;,
&quot;..&quot;); #-- RELATIVE TO ROOT OF CUURENT FILE</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>include_once(RelativePath.&quot;/db_mariadbparser.php&quot;);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##------------------------------------------------------------------=
-----------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>sqlParser(&quot;test&quot;,__FILE__);
# Precompiler</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>global
$plsqlParsed;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
Before…. Setting values to Binded Variables</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>$var_date
=3D '2018/01/01'; # Used as Bind Variable</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>/*&lt;MARIADB ANONYMOUS CASE2&gt;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>-- Testing with MARIADB, version 10.1.29</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'><span
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span># please </span><=
span
lang=3Des-419>Check this. Block comments, internal embedded code, must use =
escape
character on close comment</span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'><span
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>/* Inside comment=
s will
not </span><span lang=3Des-419>intefiering </span><span lang=3Des-TRAD>*\/<=
/span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>DECLARE in_date d=
ate
DEFAULT null;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD><span
style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set in_d=
ate =3D
DATE_ADD(</span><span style=3D'color:#17365D'>:var_date</span><span
style=3D'color:#76923C'>, INTERVAL 30 DAY);</span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>if in_date &gt;
'2018-03-30' then</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>set @text_err=
or =3D
concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date limit=
');</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>SIGNAL SQLSTA=
TE '45000'
SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>end if;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>SELECT d_date, d_=
time,
open</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>into :d_date, :d_=
time,
:open</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>FROM test.tmp_for=
ex</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>where d_date =3D =
in_date</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>limit 1;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD><span
style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set </sp=
an><span
style=3D'color:#17365D'>:var_date</span><span style=3D'color:#76923C'> =3D =
in_date;</span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&lt;END&gt;*/</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>#</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD><br>
# Execute 1 time</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>echo
&quot;RESULT =3D<span style=3D'mso-spacerun:yes'>  </span>$var_date, $d_da=
te,
$d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>#
Execute 2 times</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>echo
&quot;RESULT =3D<span style=3D'mso-spacerun:yes'>  </span>$var_date, $d_da=
te,
$d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>#
Execute 3 times</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>echo
&quot;RESULT =3D<span style=3D'mso-spacerun:yes'>  </span>$var_date, $d_da=
te,
$d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>?&gt;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Af=
ter the
execution of this Server Script the result would be something like this:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:11.=
0pt;
color:#595959' lang=3Des-TRAD><span style=3D'font-style:italic'>RESULT =3D<=
span
style=3D'mso-spacerun:yes'>  </span>2018-01-31, 2018-01-31 00:00:00, ,
1.4171000000&lt;br&gt;</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:11.=
0pt;
color:#595959' lang=3Des-TRAD><span style=3D'font-style:italic'>RESULT =3D<=
span
style=3D'mso-spacerun:yes'>  </span>2018-03-02, 2018-03-02 00:00:00, ,
1.3782700000&lt;br&gt;</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:11.=
0pt;
color:#595959' lang=3Des-TRAD><span style=3D'font-style:italic'>&quot;{\&qu=
ot;CODE\&quot;:31001,\&quot;MESSAGE\&quot;:\&quot;Error
Managed by User:2018-04-01 Exceeded Date limit
\&quot;,\&quot;USERID\&quot;:\&quot;\&quot;,\&quot;TYPE\&quot;:\&quot;DB\&q=
uot;,\&quot;DB_TYPE\&quot;:\&quot;\&quot;}&quot;</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Concepts to consider when using embedded code.</=
span></p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.5in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Host
  Language</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.6055in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It
  refers to a language that runs as a host (for example PHP) and will have a
  code embedded.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.5in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>PreCompiler</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.6055in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Piece of
  code in host language that transforms the content of the embedded code in=
to
  host language code.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.5in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Bind
  Variable</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.6055in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Host
  language variable that will be referenced in the embedded code. For gener=
al
  use, the PL / SQL convention will be used, that is, host language variabl=
es
  will be represented as &quot;:variable_name&quot; (the variable name prec=
eded
  by the colon)</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Explanation of the example code.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##-- REQUIRED TO EXECUTE PARSE MariaDB Programmatic =
and
Compound Statements ---------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>define(&quot;RelativePath&quot;, &quot;..&quot;); #--
RELATIVE TO ROOT OF CUURENT FILE</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>include_once(RelativePath.&quot;/db_mariadbparser.ph=
p&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##--------------------------------------------------=
---------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e server
script db_mariadbparser.php is a piece of PHP code that does the precompile
function, it also contains what is necessary to connect to the database and
execute the SQL commands.</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>sqlParser(&quot;test&quot;,__FILE__); # Precompiler<=
/p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>global $plsqlParsed;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is code
performs the precompliction task. That is, it reads itself to search for
specific tags to find instructions in the &quot;embedded language&quot;. The
foreing language is embedded within a block comment into the host language =
so
as not to generate error. This comments uses some rules. These are:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>Embedded code is considered what is enclosed between the tags=
 /*
&lt;……&gt; &quot;and &lt;END&gt; */. </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>The first tag provides us with additional information, in our=
 case:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:1.125in;font-family:"Courier New";font-s=
ize:
11.0pt;color:#76923C' lang=3Des-TRAD>/*&lt;MARIADB ANONYMOUS CASE2&gt;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.75in;font-family:Arial;font-size:10.0pt'
lang=3Des-419>The parser will interpret this as follows:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt;margin-left:.7076in'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
MARIADB</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:6.7555in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
SQL
  language or dialect or Database engine.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
ANONYMOUS</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:6.7555in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Indicates
  that it is an anonymous block. Used for future implementation, for now it=
 is
  not relevant but the term &quot;ANONYMOUS&quot; must be present.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
CASE2</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:6.7555in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It is a
  unique name. It is the identification of the block that refers to the SQL
  code that ends when finding the &lt;END&gt;*/ tag. During the precompilat=
ion
  process, the embedded code will be extracted and stored in a structure of
  OBJECTS within the host language differentiated by this name and to allow=
 its
  subsequent invocation. It must be unique within a Script Server.</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>## Before.. Setting values to Binded Variables</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>$var_date =3D '2018/01/01'; # Used as Bind Variable<=
/p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e host
variable $var_date will be used to send information to the embedded code (in
the form of Bind Variable). Here we make sure to give it an initial value.<=
/p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>/*&lt;MARIADB ANONYMOUS CASE2&gt;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>-- Testing with MARIADB, version 10.1.=
29</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>DECLARE in_date date DEFAULT null;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD><span style=3D'color:#76923C'><span
style=3D'mso-spacerun:yes'>  </span>set in_date =3D DATE_ADD(</span><span
style=3D'color:#17365D'>:var_date</span><span style=3D'color:#76923C'>, INT=
ERVAL 30
DAY);</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>if
in_date &gt; '2018-03-30' then</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>   
</span>set @text_error =3D concat('Error Managed by User:',cast(in_date as
CHAR),' Exceeded Date limit');</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>   
</span>SIGNAL SQLSTATE '45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D
@text_error;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>end
if;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>SELECT d_date, d_time, open</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>into
:d_date, :d_time, :open</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>FROM
test.tmp_forex</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>where d_date =3D in_date</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>limit 1;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD><span style=3D'color:#76923C'><span
style=3D'mso-spacerun:yes'>  </span>set </span><span style=3D'color:#17365=
D'>:var_date</span><span
style=3D'color:#76923C'> =3D in_date;</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&lt;END&gt;*/</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>#</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is in
our embedded code using the coding rules of MariaDb Programmatic and Compou=
nd
Statements. The only non-standard diversification with respect to MariaDB, =
is
the use of host variables. So the variable :var_date of the embedded code w=
ill
have the value of $var_date of the host language.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD># Execute 1 time</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind)=
;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEv=
al);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>This is the way to instruct the host language to execute the
content of the embedded code.</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt;margin-left:.3333in'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.143in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2229in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It is a
  text variable that contains code in the host language to ensure that the
  values ​​of the host variables are set to their corresponding embedde=
d code.
  Its content was built by the precompiler. Here &quot;CASE2&quot; refers to
  the specific code extracted from the comment identified within the tags:<=
/p>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>/*&lt;MARIADB
  ANONYMOUS CASE2&gt;………&lt;END&gt;*/</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.143in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2229in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It is a
  text variable that contains code in the host language for the execution of
  the embedded code. Its content was built by the precompiler. This will run
  directly on the associated database engine. In this specific case it is
  MariaDB, but its final implementation will cover other databases (for
  example, Oracle, Postgres). Here &quot;CASE2&quot; refers to the specific
  code extracted from the comment identified within the tags:</p>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>/*&lt;MARIADB
  ANONYMOUS CASE2&gt;………&lt;END&gt;*/</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>echo &quot;RESULT =3D<span style=3D'mso-spacerun:yes=
'> 
</span>$var_date, $d_date, $d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is is
simply to show the content value of each host variable referenced in the
embedded code to verify that the transfer of the host language to the embed=
ded
code and subsequently the transfer of the embedded code to the host variabl=
e.
If the value of the host variable is modified in the embedded code, it will=
 be
reflected in the host language.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:16.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>The precompiler.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>El
precompilador se invoca ejecutando el comando:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>sqlParser(&quot;test&quot;,__FILE__); # Precompiler<=
/p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>La
funcion sqlParser es parte de db_mariadbparser.php. Esta funcion recorre el
script (__FILE__ es decir, el mismo) buscando bloques de comentarios encerr=
ados
dentro de dos tags especificos.</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt;margin-left:.3333in'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:.784in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Empieza</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.809in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>/*&lt;DATABASE_ENGINE
  ANONYMOUS BLOCK_NAME&gt;</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:.784in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Termina</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.809in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>&lt;END&gt;*/</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Lo=
s textos
dentro de los tags deben estar en MAYUSCULA.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>La=
 llamada
al precompilador debe estar en el principio, de esta manera los codigos ebu=
tido
seran interpretatos y construidos antes de continuar la ejecuciond el script
original.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span lang=3Des-=
419>El
precompilador crea un arreglo llamado $</span><span lang=3Des-TRAD>plsqlPar=
sed,
cuyos elementos estan indexados por el nombre del codigo identificado por el
&quot;BLOCK_NAME&quot;.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>El
precompilador construye varias variables referenciadas por</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span lang=3Des-=
419>$</span><span
lang=3Des-TRAD>plsqlParsed[&quot;BLOCK_NAME&quot;]</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>L=
as que
para efecto de ejecucion son de nuetros interes son</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span lang=3Des-=
419>$</span><span
lang=3Des-TRAD>plsqlParsed[&quot;BLOCK_NAME&quot;]-&gt;listToBind</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span lang=3Des-=
419>$</span><span
lang=3Des-TRAD>plsqlParsed[&quot;BLOCK_NAME&quot;]-&gt;phpCodeToEval</span>=
</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.7354in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt'
  lang=3Des-TRAD>&quot;listToBind&quot;</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:8.475in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Contiene
  el código en PHP para asegurar la asignación de las Variables Binded y =
DEBE
  ser ejecutado antes de de &quot;phpCodeToEval&quot;</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.7354in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt'
  lang=3Des-TRAD>&quot;phpCodeToEval&quot;</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:8.475in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Contiene
  el código en PHP que invocará todo lo necesario para la ejecución del =
código
  embutido.</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>A=
quí
mostraremos su contenido basado en el codigo del ejemplo.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD><=
span
style=3D'font-weight:bold'>Contenido de
$plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>E=
ste
contenido ha sido construido por el pre compilador basado en la lista de
variables binded encontrado en en texto embutido. El pre compilador asume q=
ue
son variable estándar del anfitrión y que esta dentro del mismo &quot;<sp=
an
style=3D'font-weight:bold'>scope&quot;</span> de ejecución al momento de e=
jecutar
el &quot;<span style=3D'font-weight:bold'>eval</span>&quot;. De no existir =
la
variable, es creada vacía para evitar errores de ejecución.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>C=
ódigo
PHP generado:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db =3D new clsDBconnector(&quot;test&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ =3D '';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($var_date)) $var_date=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('var_date').' =3D
'.$db-&gt;ToSQL($var_date,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($d_date)) $d_date=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('d_date').' =3D
'.$db-&gt;ToSQL($d_date,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($d_time)) $d_time=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('d_time').' =3D
'.$db-&gt;ToSQL($d_time,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($open)) $open=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('open').' =3D
'.$db-&gt;ToSQL($open,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$plsqlParsed['CASE2']-&gt;phpCodeToEval =3D str_repla=
ce('###
BIND',$___BIND___,$plsqlParsed['CASE2']-&gt;phpCode);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>C=
uando se
ejecuta este código vía &quot;<span style=3D'font-weight:bold'>eval</span=
>&quot;
se crean o reemplazan dos variables;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>$___BIND___</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-TRAD>$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span lang=3Des-=
TRAD>Note
que $plsqlParsed[&quot;CASE2&quot;]-&gt;</span><span style=3D'font-weight:b=
old'
lang=3Des-TRAD>phpCodeToEval</span><span lang=3Des-TRAD> es creado por
$plsqlParsed[&quot;CASE2&quot;]-&gt;</span><span style=3D'font-weight:bold'
lang=3Des-TRAD>listToBind</span><span lang=3Des-TRAD>, la razón es porque,=
 para
poder ejecutar el código SQL es necesario asegurar la sincronización de l=
as
variables binded. Por eso existe una variable
$plsqlParsed[&quot;CASE2&quot;]-&gt;</span><span style=3D'font-weight:bold'
lang=3Des-TRAD>phpCode</span><span lang=3Des-TRAD>, el cual contiene un tag=
 &quot;</span><span
style=3D'font-weight:bold' lang=3Des-419>### BIND</span><span lang=3Des-TRA=
D>&quot;.
Este tagl es usado como elemento de sustitución utilizando la variable &qu=
ot;</span><span
style=3D'font-weight:bold' lang=3Des-419>$___BIND___</span><span lang=3Des-=
419>&quot;</span><span
lang=3Des-TRAD> y es recreada cada vez que se ejecuta
$plsqlParsed[&quot;CASE2&quot;]-&gt;</span><span style=3D'font-weight:bold'
lang=3Des-TRAD>listToBind</span><span lang=3Des-TRAD>. La variable &quot;</=
span><span
style=3D'font-weight:bold' lang=3Des-419>$___BIND___</span><span lang=3Des-=
419>&quot;
contiene codigo SQL<span style=3D'mso-spacerun:yes'>  </span>a ser sustitu=
ido con
los valores sincronizados de las variables binded. Ejemplo:</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>SET @VAR_DATE =3D '2018/01/01';SET @D_DATE =3D NULL;S=
ET @D_TIME
=3D NULL;SET @OPEN =3D NULL;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD><=
span
style=3D'font-weight:bold'>La variable
$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCode</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span lang=3Des-=
TRAD>Esta
variable tiene el código de ejecución original. Es creada por el pre comp=
ilador
y una vez creada, no es modificada. Siempre es reutilizada para construir la
variable $plsqlParsed[&quot;CASE2&quot;]-&gt;</span><span style=3D'font-wei=
ght:
bold' lang=3Des-TRAD>phpCodeToEval</span><span lang=3Des-TRAD>, la cual con=
tiene el
tag de sustitución. El tag<span style=3D'mso-spacerun:yes'>  </span>&quot=
;</span><span
lang=3Des-419>### BIND</span><span lang=3Des-TRAD>&quot; es sustituido por =
el
contenido de &quot;</span><span lang=3Des-419>$___BIND___&quot;.</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>El
contenido original de $plsqlParsed[&quot;CASE2&quot;]-&gt;phpCode es:</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db =3D new clsDBconnector(&quot;test&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;query(&quot;BEGIN NOT ATOMIC</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>### BIND </=
p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>BEGIN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>-- Testing with MARIADB, version 10.1.29 </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span># please C=
heck
this. Block comments, internal embedded code, must use escape character </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>/* Inside =
comments
will not intefiering */ </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>DECLARE in=
_date
date DEFAULT null; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set in_dat=
e =3D
DATE_ADD(@VAR_DATE, INTERVAL 30 DAY); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>if in_date=
 &gt;
'2018-03-30' then </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>set @t=
ext_error =3D
concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date limit=
'); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>SIGNAL=
 SQLSTATE
'45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>end if; </=
p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>SELECT d_d=
ate,
d_time, open </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>into @D_DA=
TE,
@D_TIME, @OPEN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>FROM test.=
tmp_forex
</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>where d_da=
te =3D
in_date </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>limit 1; <=
/p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set @VAR_D=
ATE =3D
in_date; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>SELECT @VAR=
_DATE as
var_date,@D_DATE as d_date,@D_TIME as d_time,@OPEN as open, 0 as nada; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>END; END;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>while ($db-&gt;next_record()) { # var_dump($db-&gt;Re=
cord);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$var_date =3D $db-&gt;Record['var_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_date =3D $db-&gt;Record['d_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_time =3D $db-&gt;Record['d_time'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$open =3D $db-&gt;Record['open'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>}</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;close();</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD><=
span
style=3D'font-weight:bold'>La variable
$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>E=
sta
variable es creada o modificada cada ves que se ejecuta
$plsqlParsed[&quot;CASE2&quot;]-&gt;<span style=3D'font-weight:bold'>listTo=
Bind</span>
y es la que contiene el código final para la ejecución. A continuación un
ejemplo del código PHP definitivo que queda guardado en
$plsqlParsed[&quot;CASE2&quot;]-&gt;<span style=3D'font-weight:bold'>phpCod=
eToEval</span>:</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db =3D new clsDBconnector(&quot;test&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;query(&quot;BEGIN NOT ATOMIC</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>SET @VAR_DA=
TE =3D
'2018/01/01';SET @D_DATE =3D NULL;SET @D_TIME =3D NULL;SET @OPEN =3D NULL; =
</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>BEGIN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>-- Testing with MARIADB, version 10.1.29 </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span># please C=
heck
this. Block comments, internal embedded code, must use escape character </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>/* Inside =
comments
will not intefiering */ </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>DECLARE in=
_date
date DEFAULT null; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set in_dat=
e =3D
DATE_ADD(@VAR_DATE, INTERVAL 30 DAY); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>if in_date=
 &gt;
'2018-03-30' then </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>set @t=
ext_error =3D
concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date limit=
'); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>SIGNAL=
 SQLSTATE
'45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>end if; </=
p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>SELECT d_d=
ate,
d_time, open </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>into @D_DA=
TE,
@D_TIME, @OPEN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>FROM test.=
tmp_forex
</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>where d_da=
te =3D
in_date </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>limit 1; <=
/p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set @VAR_D=
ATE =3D
in_date; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>SELECT @VAR=
_DATE as
var_date,@D_DATE as d_date,@D_TIME as d_time,@OPEN as open, 0 as nada; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>END; END;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>while ($db-&gt;next_record()) { # var_dump($db-&gt;Re=
cord);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$var_date =3D $db-&gt;Record['var_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_date =3D $db-&gt;Record['d_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_time =3D $db-&gt;Record['d_time'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$open =3D $db-&gt;Record['open'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>}</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;close();</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Codigo enbutido Vs. Codigo Generado</span></p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.0979in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Codigo
  embutido</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2361in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Codigo
  generado</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.0979in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>--
  --------------------------------------------------------------------</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>-- Testing with MARIADB, version 10.1.29</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>--
  --------------------------------------------------------------------</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'><span
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span># please </span=
><span
  lang=3Des-419>Check this. Block comments, internal embedded code, must use
  escape character</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'><span
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>/* Inside comme=
nts will
  not </span><span lang=3Des-419>intefiering </span><span lang=3Des-TRAD>*\=
/</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>DECLARE in_date=
 date
  DEFAULT null;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-TRAD><span
  style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set in=
_date =3D
  DATE_ADD(</span><span style=3D'color:#17365D'>:var_date</span><span
  style=3D'color:#76923C'>, INTERVAL 30 DAY);</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>if in_date &gt;
  '2018-03-30' then</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>set @text_e=
rror =3D
  concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date
  limit');</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>SIGNAL SQLS=
TATE
  '45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>end if;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>SELECT d_date, =
d_time,
  open</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>into :d_date, :=
d_time,
  :open</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>FROM test.tmp_f=
orex</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>where d_date =
=3D in_date</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>limit 1;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-TRAD><span
  style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set </=
span><span
  style=3D'color:#17365D'>:var_date</span><span style=3D'color:#76923C'> =
=3D in_date;</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>--
  --------------------------------------------------------------------</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2361in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db
  =3D new clsDBconnector(&quot;test&quot;);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  =3D '';</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($var_date)) <span style=3D'color:#17365D'>$var_date</span>=3D&quo=
t;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('var_date').' =3D '.$db-&gt;ToSQL(<span style=3D'=
color:
  #17365D'>$var_date</span>,3).';';</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($d_date)) $d_date=3D&quot;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('d_date').' =3D '.$db-&gt;ToSQL($d_date,3).';';</=
p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($d_time)) $d_time=3D&quot;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('d_time').' =3D '.$db-&gt;ToSQL($d_time,3).';';</=
p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($open)) $open=3D&quot;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('open').' =3D '.$db-&gt;ToSQL($open,3).';';</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$plsqlParsed['CASE2']-&gt;phpCodeToEval
  =3D str_replace('### BIND',$___BIND___,$plsqlParsed['CASE2']-&gt;phpCode)=
;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db
  =3D new clsDBconnector(&quot;test&quot;);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db-&gt;query(&quot;BEGIN
  NOT ATOMIC</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span>SET <span style=3D'color:#17365D'>@VA=
R_DATE</span>
  =3D '2018/01/01';SET @D_DATE =3D NULL;SET @D_TIME =3D NULL;SET @OPEN =3D =
NULL; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>BEGIN
  </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  -------------------------------------------------------------------- </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  Testing with MARIADB, version 10.1.29 </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  -------------------------------------------------------------------- </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span># please Check this. Block comments,
  internal embedded code, must use escape character </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>/* Inside comments will not intefier=
ing */ </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>DECLARE in_date date DEFAULT null; <=
/p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>set in_date =3D DATE_ADD(<span
  style=3D'color:#17365D'>@VAR_DATE</span>, INTERVAL 30 DAY); </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>if in_date &gt; '2018-03-30' then </=
p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>    </span>set @text_error =3D concat('Erro=
r Managed
  by User:',cast(in_date as CHAR),' Exceeded Date limit'); </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>    </span>SIGNAL SQLSTATE '45000' SET MYSQ=
L_ERRNO =3D
  31001, MESSAGE_TEXT =3D @text_error; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>end if; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>SELECT d_date, d_time, open </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>into @D_DATE, @D_TIME, @OPEN </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>FROM test.tmp_forex </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>where d_date =3D in_date </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>limit 1; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>set <span style=3D'color:#17365D'>@V=
AR_DATE</span>
  =3D in_date; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  --------------------------------------------------------------------</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span>SELECT @VAR_DATE as var_date,@D_DATE =
as
  d_date,@D_TIME as d_time,@OPEN as open, 0 as nada; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>END;
  END;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>&quot;);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>while
  ($db-&gt;next_record()) { # var_dump($db-&gt;Record);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'color:#17365D'>$var_date</span> =3D $db-&gt;Record['var_date'] ;=
</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$d_date
  =3D $db-&gt;Record['d_date'] ;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$d_time
  =3D $db-&gt;Record['d_time'] ;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$open
  =3D $db-&gt;Record['open'] ;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>}</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db-&gt;close();</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;font-family:Arial;font-size:8.0pt' lang=3Des-419><sp=
an
style=3D'font-weight:bold'>Note: $var_date tracking on blue char color.</sp=
an></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Porque se usa eval.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Ev=
al ha
sido la unica manera que he encontrado de ejecutar un codigo dinamicamente.=
 Si
algun lector interesado tiene otro metodo por favor comentar.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD><=
span
style=3D'font-weight:bold'>Sobre el archivo db_mariadbparser.php</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Es=
te
script contiene la logica del precompilador ademas de todo lo necesario par=
a la
conectarse a una base de datos MySql con controladores &quot;mysqli&quot;. =
Es
el resumen dentro de un solo archivo de un grupo de multiples archivos que
conforma un<span style=3D'mso-spacerun:yes'>  </span>&quot;Generic DB
Adapters&quot;, el cual ha sido simplificado para efecto de prueba de esta
idea. Esta idea es experimental, en fase de prueba y posiblemene se conform=
ará
como parte del desarrollo integral asociado a ….. FRAMEWORK… </p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>En=
 este
archivo encotrará referencias a PL/SQL u ORACLE, del cual partío la idea
original y fue probada de la misma manera que esta. Para el momento de las
pruebas con ORACLE mysql no tenia el concepto de ejecucion de instrucciones
fuera de procedure o function, tampoco tiene el concepto de &quot;Binded
Variables&quot; como lo hace ORACLE, la implementacion mas cercana es la
asociacion por posicionamiento y no por nombre de variables. Mysql (y MARIA=
DB)
tienen el concepto de User-Defined Variables de las cuales se hace uso para
simular las &quot;Binded Variables&quot;, si notan, el codigo generado
sustituye las valriables precedidas por &quot;.&quot; a variables precedidas
por &quot;@&quot; dentro del codigo embutido.</p>

</div>

</div>

</div>

<div>

<p style=3D'margin:0in'>&nbsp;</p>

<p style=3D'text-align:left;margin:0in;font-family:Arial;font-size:9pt;
color:#969696;direction:ltr'>Created with Microsoft OneNote 2010<br>
One place for all your notes and information</p>

</div>

</body>

</html>
