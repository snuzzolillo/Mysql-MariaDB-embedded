MIME-Version: 1.0
Content-Location: file:///C:/D10446F3/EnglishMariaDBProgrammaticandCompoundStatements.htm
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html; charset="utf-8"

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office"
xmlns:dt=3D"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; charset=3Dutf-8">
<meta name=3DProgId content=3DOneNote.File>
<meta name=3DGenerator content=3D"Microsoft OneNote 14">
<link id=3DMain-File rel=3DMain-File
href=3DEnglishMariaDBProgrammaticandCompoundStatements.htm>
<link rel=3DFile-List
href=3D"EnglishMariaDBProgrammaticandCompoundStatements_files/filelist.xml">
</head>

<body lang=3Des-US>

<div style=3D'direction:ltr;border-width:100%'>

<div style=3D'direction:ltr;margin-top:0in;margin-left:0in;width:10.3354in'>

<div style=3D'direction:ltr;margin-top:0in;margin-left:.075in;width:6.5493i=
n'>

<p style=3D'margin:0in;font-family:Arial;font-size:17.0pt' lang=3Des-419>En=
glish:
Maria DB Programmatic and Compound Statements</p>

</div>

<div style=3D'direction:ltr;margin-top:.0388in;margin-left:.075in;width:1.7=
805in'>

<p style=3D'margin:0in;font-family:Calibri;font-size:10.0pt;color:gray'
lang=3Den-US>Thursday, October 17, 2019</p>

<p style=3D'margin:0in;font-family:Calibri;font-size:10.0pt;color:gray'
lang=3Den-US>9:03 AM</p>

</div>

<div style=3D'direction:ltr;margin-top:.3284in;margin-left:0in;width:10.335=
4in'>

<p style=3D'margin:0in;font-family:Arial;font-size:16.0pt' lang=3Des-419>Pr=
ogrammatic
and Compound Statements (MariaDB) embedded in a Server Script (PHP)</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:10.=
0pt;
color:#595959' lang=3Des-419><span style=3D'font-style:italic'>Note: The co=
de shown
here is by way of example, this implementation is part of a larger project
called WEB APPLICATION FULLSTACK FRAMEWORK.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>The
following code allows to embed simple SQL instructions and / or
&quot;Programmatic and Compound Statements&quot; (in this case MariaDB V 10=
.1.x
or higher) into a sequence of a Server Script (in this case PHP). The Server
Script code would look something like this:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&lt;?php</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##------------------------------------------------------------------=
-----------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
MARIADB Programmatic and Compound Statements</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##------------------------------------------------------------------=
-----------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##--
REQUIRED TO EXECUTE PARSE MariaDB Programmatic and Compound Statements
---------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>define(&quot;RelativePath&quot;,
&quot;..&quot;); #-- RELATIVE TO ROOT OF CUURENT FILE</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>include_once(RelativePath.&quot;/db_mariadbparser.php&quot;);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##------------------------------------------------------------------=
-----------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>sqlParser(&quot;test&quot;,__FILE__);
# Precompiler</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>global
$plsqlParsed;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
Before…. Setting values to Binded Variables</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>$var_date
=3D '2018/01/01'; # Used as Bind Variable</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>/*&lt;MARIADB ANONYMOUS CASE2&gt;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>-- Testing with MARIADB, version 10.1.29</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'><span
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span># please </span><=
span
lang=3Des-419>Check this. Block comments, internal embedded code, must use =
escape
character on close comment</span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'><span
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>/* Inside comment=
s will
not </span><span lang=3Des-419>intefiering </span><span lang=3Des-TRAD>*\/<=
/span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>DECLARE in_date d=
ate
DEFAULT null;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD><span
style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set in_d=
ate =3D
DATE_ADD(</span><span style=3D'color:#17365D'>:var_date</span><span
style=3D'color:#76923C'>, INTERVAL 30 DAY);</span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>if in_date &gt;
'2018-03-30' then</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>set @text_err=
or =3D
concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date limit=
');</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>SIGNAL SQLSTA=
TE '45000'
SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>end if;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>SELECT d_date, d_=
time,
open</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>into :d_date, :d_=
time,
:open</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>FROM test.tmp_for=
ex</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>where d_date =3D =
in_date</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>limit 1;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD><span
style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set </sp=
an><span
style=3D'color:#17365D'>:var_date</span><span style=3D'color:#76923C'> =3D =
in_date;</span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt;color:#76=
923C'
lang=3Des-TRAD>&lt;END&gt;*/</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>#</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD><br>
# Execute 1 time</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>echo
&quot;RESULT =3D<span style=3D'mso-spacerun:yes'>  </span>$var_date, $d_da=
te,
$d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>#
Execute 2 times</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>echo
&quot;RESULT =3D<span style=3D'mso-spacerun:yes'>  </span>$var_date, $d_da=
te,
$d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>#
Execute 3 times</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>echo
&quot;RESULT =3D<span style=3D'mso-spacerun:yes'>  </span>$var_date, $d_da=
te,
$d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>?&gt;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Af=
ter the
execution of this Server Script the result would be something like this:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:11.=
0pt;
color:#595959' lang=3Des-TRAD><span style=3D'font-style:italic'>RESULT =3D<=
span
style=3D'mso-spacerun:yes'>  </span>2018-01-31, 2018-01-31 00:00:00, ,
1.4171000000&lt;br&gt;</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:11.=
0pt;
color:#595959' lang=3Des-TRAD><span style=3D'font-style:italic'>RESULT =3D<=
span
style=3D'mso-spacerun:yes'>  </span>2018-03-02, 2018-03-02 00:00:00, ,
1.3782700000&lt;br&gt;</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Calibri;font-size:11.=
0pt;
color:#595959' lang=3Des-TRAD><span style=3D'font-style:italic'>&quot;{\&qu=
ot;CODE\&quot;:31001,\&quot;MESSAGE\&quot;:\&quot;Error
Managed by User:2018-04-01 Exceeded Date limit
\&quot;,\&quot;USERID\&quot;:\&quot;\&quot;,\&quot;TYPE\&quot;:\&quot;DB\&q=
uot;,\&quot;DB_TYPE\&quot;:\&quot;\&quot;}&quot;</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Concepts to consider when using embedded code.</=
span></p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.5in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Host
  Language</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.6055in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It
  refers to a language that runs as a host (for example PHP) and will have a
  code embedded.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.5in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>PreCompiler</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.6055in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Piece of
  code in host language that transforms the content of the embedded code in=
to
  host language code.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.5in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Bind
  Variable</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.6055in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Host
  language variable that will be referenced in the embedded code. For gener=
al
  use, the PL / SQL convention will be used, that is, host language variabl=
es
  will be represented as &quot;:variable_name&quot; (the variable name prec=
eded
  by the colon)</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Explanation of the example code.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##-- REQUIRED TO EXECUTE PARSE MariaDB Programmatic =
and
Compound Statements ---------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>define(&quot;RelativePath&quot;, &quot;..&quot;); #--
RELATIVE TO ROOT OF CUURENT FILE</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>include_once(RelativePath.&quot;/db_mariadbparser.ph=
p&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##--------------------------------------------------=
---------------------------------</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e server
script db_mariadbparser.php is a piece of PHP code that does the precompile
function, it also contains what is necessary to connect to the database and
execute the SQL commands.</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>sqlParser(&quot;test&quot;,__FILE__); # Precompiler<=
/p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>global $plsqlParsed;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is code
performs the precompliction task. That is, it reads itself to search for
specific tags to find instructions in the &quot;embedded language&quot;. The
foreing language is embedded within a block comment into the host language =
so
as not to generate error. This comments uses some rules. These are:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>Embedded code is considered what is enclosed between the tags=
 /*
&lt;……&gt; &quot;and &lt;END&gt; */. </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>The first tag provides us with additional information, in our=
 case:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:1.125in;font-family:"Courier New";font-s=
ize:
11.0pt;color:#76923C' lang=3Des-TRAD>/*&lt;MARIADB ANONYMOUS CASE2&gt;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.75in;font-family:Arial;font-size:10.0pt'
lang=3Des-419>The parser will interpret this as follows:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt;margin-left:.7076in'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
MARIADB</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:6.7555in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
SQL
  language or dialect or Database engine.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
ANONYMOUS</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:6.7555in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Indicates
  that it is an anonymous block. Used for future implementation, for now it=
 is
  not relevant but the term &quot;ANONYMOUS&quot; must be present.</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
CASE2</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:6.7555in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It is a
  unique name. It is the identification of the block that refers to the SQL
  code that ends when finding the &lt;END&gt;*/ tag. During the precompilat=
ion
  process, the embedded code will be extracted and stored in a structure of
  OBJECTS within the host language differentiated by this name and to allow=
 its
  subsequent invocation. It must be unique within a Script Server.</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>## Before.. Setting values to Binded Variables</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>$var_date =3D '2018/01/01'; # Used as Bind Variable<=
/p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e host
variable $var_date will be used to send information to the embedded code (in
the form of Bind Variable). Here we make sure to give it an initial value.<=
/p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>/*&lt;MARIADB ANONYMOUS CASE2&gt;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>-- Testing with MARIADB, version 10.1.=
29</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>DECLARE in_date date DEFAULT null;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD><span style=3D'color:#76923C'><span
style=3D'mso-spacerun:yes'>  </span>set in_date =3D DATE_ADD(</span><span
style=3D'color:#17365D'>:var_date</span><span style=3D'color:#76923C'>, INT=
ERVAL 30
DAY);</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>if
in_date &gt; '2018-03-30' then</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>   
</span>set @text_error =3D concat('Error Managed by User:',cast(in_date as
CHAR),' Exceeded Date limit');</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>   
</span>SIGNAL SQLSTATE '45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D
@text_error;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>end
if;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>SELECT d_date, d_time, open</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>into
:d_date, :d_time, :open</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </=
span>FROM
test.tmp_forex</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>where d_date =3D in_date</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD><span style=3D'mso-spacerun:yes'> 
</span>limit 1;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD><span style=3D'color:#76923C'><span
style=3D'mso-spacerun:yes'>  </span>set </span><span style=3D'color:#17365=
D'>:var_date</span><span
style=3D'color:#76923C'> =3D in_date;</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt;color:#76923C' lang=3Des-TRAD>&lt;END&gt;*/</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>##
---------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>#</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is in
our embedded code using the coding rules of MariaDb Programmatic and Compou=
nd
Statements. The only non-standard diversification with respect to MariaDB, =
is
the use of host variables. So the variable :var_date of the embedded code w=
ill
have the value of $var_date of the host language.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD># Execute 1 time</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind)=
;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEv=
al);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>This is the way to instruct the host language to execute the
content of the embedded code.</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt;margin-left:.3333in'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.143in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind);</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2229in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It is a
  text variable that contains code in the host language to ensure that the
  values ​​of the host variables are set to their corresponding embedde=
d code.
  Its content was built by the precompiler. Here &quot;CASE2&quot; refers to
  the specific code extracted from the comment identified within the tags:<=
/p>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>/*&lt;MARIADB
  ANONYMOUS CASE2&gt;………&lt;END&gt;*/</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.143in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>eval($plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval);</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2229in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It is a
  text variable that contains code in the host language for the execution of
  the embedded code. Its content was built by the precompiler. This will run
  directly on the associated database engine. In this specific case it is
  MariaDB, but its final implementation will cover other databases (for
  example, Oracle, Postgres). Here &quot;CASE2&quot; refers to the specific
  code extracted from the comment identified within the tags:</p>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>/*&lt;MARIADB
  ANONYMOUS CASE2&gt;………&lt;END&gt;*/</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>echo &quot;RESULT =3D<span style=3D'mso-spacerun:yes=
'> 
</span>$var_date, $d_date, $d_time, $open&lt;br&gt;\n&quot; ;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is is
simply to show the content value of each host variable referenced in the
embedded code to verify that the transfer of the host language to the embed=
ded
code and subsequently the transfer of the embedded code to the host variabl=
e.
If the value of the host variable is modified in the embedded code, it will=
 be
reflected in the host language.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:16.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>The precompiler.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e pre
compiler is invoked by executing the command:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>sqlParser(&quot;test&quot;,__FILE__); # Precompiler<=
/p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>The
sqlParser function is part of db_mariadbparser.php. This function runs thro=
ugh
the script ( __FILE__ that is, &quot;to itself&quot;) looking for comment
blocks enclosed within two specific tags.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt;margin-left:.3333in'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:.8298in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Start
  with</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.8277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>/*&lt;DATABASE_ENGINE
  ANONYMOUS BLOCK_NAME&gt;</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:.8298in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>Ends
  with</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:3.8277in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD=
>&lt;END&gt;*/</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e texts
of the tags must be in UPPERCASE.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e call
to the precompiler must be in the beginning, in this way the embedded codes
will be interpreted and constructed before continuing to execute the origin=
al
script.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>The
precompiler creates an array called $plsqlParsed, whose elements are indexe=
d by
the code name identified by the &quot;BLOCK_NAME&quot;.</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
e pre
compiler builds several variables referenced by:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'><span
lang=3Des-419>$</span><span lang=3Des-TRAD>plsqlParsed[&quot;BLOCK_NAME&quo=
t;]</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
ose that
are of interest to us for execution are:</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'><span
lang=3Des-419>$</span><span lang=3Des-TRAD>plsqlParsed[&quot;BLOCK_NAME&quo=
t;]-&gt;listToBind</span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'><span
lang=3Des-419>$</span><span lang=3Des-TRAD>plsqlParsed[&quot;BLOCK_NAME&quo=
t;]-&gt;phpCodeToEval</span></p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt;margin-left:.3333in'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.7354in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt'
  lang=3Des-TRAD>&quot;listToBind&quot;</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:7.9729in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
Contains
  the code in PHP to ensure the assignment of the Binded Variables and MUST=
 be
  executed before &quot;phpCodeToEval&quot;</p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:1.7354in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt'
  lang=3Des-TRAD>&quot;phpCodeToEval&quot;</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:7.9729in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
It
  contains the code in PHP that will invoke everything necessary for the
  execution of the embedded code.</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Be=
low is
its content based on the code in the example.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Content of $plsqlParsed [&quot;CASE2&quot;] -&gt;
listToBind</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>The
content shown has been built by the precompiler based on the list of Binded
Variables found in the embedded text. The precompiler assumes that they are
&quot;standard variable&quot; of the host language and that the variables a=
re
within the same &quot;<span style=3D'font-weight:bold'>scope</span>&quot; of
execution where &quot;<span style=3D'font-weight:bold'>eval</span>&quot; is
executed. If the variables do not exist, they are created empty to avoid
execution errors.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-TRAD>&=
nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>PH=
P code
generated:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db =3D new clsDBconnector(&quot;test&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ =3D '';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($var_date)) $var_date=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('var_date').' =3D
'.$db-&gt;ToSQL($var_date,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($d_date)) $d_date=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('d_date').' =3D
'.$db-&gt;ToSQL($d_date,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($d_time)) $d_time=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('d_time').' =3D
'.$db-&gt;ToSQL($d_time,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>if (!isset($open)) $open=3D&quot;&quot;;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$___BIND___ .=3D 'SET @'.strtoupper('open').' =3D
'.$db-&gt;ToSQL($open,3).';';</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$plsqlParsed['CASE2']-&gt;phpCodeToEval =3D str_repla=
ce('###
BIND',$___BIND___,$plsqlParsed['CASE2']-&gt;phpCode);</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Wh=
en this
code is executed via &quot;eval&quot; the following two variables are creat=
ed
or replaced;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>$___BIND___</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-TRAD>$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>No=
te that
$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval is created by
$plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind, the reason is because, in o=
rder
to execute the SQL code it is necessary to ensure the synchronization of the
Binded Variables. For that there is a variable called
$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCode, which is generated by the
precompiler and contains a line with the text &quot;### BIND&quot;. This ta=
g is
used as a substitution element using the variable &quot;$___BIND___&quot; a=
nd
is recreated each time $plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind is
executed. The variable &quot;$___BIND___&quot; contains SQL code to be
substituted with the synchronized values ​​of the binded variables. Exa=
mple of
&quot;$___BIND___&quot;:</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>SET @VAR_DATE =3D '2018/01/01';SET @D_DATE =3D NULL;S=
ET @D_TIME
=3D NULL;SET @OPEN =3D NULL;</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span
style=3D'font-weight:bold' lang=3Des-419>Content of </span><span style=3D'f=
ont-weight:
bold' lang=3Des-TRAD>$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCode</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is
variable has the original execution code. It is created by the pre compiler=
 and
once created, it is not modified. It is always reused to build the
$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval variable, which contains =
the
replacement tag. The tag &quot;### BIND&quot; is replaced by the content of
&quot;$___BIND___&quot;.</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:Arial;font-size:10.0p=
t'
lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Ex=
ample of
$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCode generated from the embedded cod=
e:</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db =3D new clsDBconnector(&quot;test&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;query(&quot;BEGIN NOT ATOMIC</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>### BIND </=
p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>BEGIN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>-- Testing with MARIADB, version 10.1.29 </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span># please C=
heck
this. Block comments, internal embedded code, must use escape character </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>/* Inside =
comments
will not intefiering */ </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>DECLARE in=
_date
date DEFAULT null; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set in_dat=
e =3D
DATE_ADD(@VAR_DATE, INTERVAL 30 DAY); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>if in_date=
 &gt;
'2018-03-30' then </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>set @t=
ext_error =3D
concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date limit=
'); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>SIGNAL=
 SQLSTATE
'45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>end if; </=
p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>SELECT d_d=
ate,
d_time, open </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>into @D_DA=
TE,
@D_TIME, @OPEN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>FROM test.=
tmp_forex
</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>where d_da=
te =3D
in_date </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>limit 1; <=
/p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set @VAR_D=
ATE =3D
in_date; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>SELECT @VAR=
_DATE as
var_date,@D_DATE as d_date,@D_TIME as d_time,@OPEN as open, 0 as nada; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>END; END;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>while ($db-&gt;next_record()) { # var_dump($db-&gt;Re=
cord);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$var_date =3D $db-&gt;Record['var_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_date =3D $db-&gt;Record['d_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_time =3D $db-&gt;Record['d_time'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$open =3D $db-&gt;Record['open'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>}</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;close();</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt'><span
style=3D'font-weight:bold' lang=3Des-419>Content of </span><span style=3D'f=
ont-weight:
bold' lang=3Des-TRAD>$plsqlParsed[&quot;CASE2&quot;]-&gt;phpCodeToEval</spa=
n></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is
variable is created or modified every time
eval($plsqlParsed[&quot;CASE2&quot;]-&gt;listToBind) is executed and is the=
 one
that contains the final code for execution. Here is an example of the
definitive PHP code that is saved in $plsqlParsed[&quot;CASE2&quot;]-&gt;ph=
pCodeToEval:</p>

<p style=3D'margin:0in;font-family:"Courier New";font-size:11.0pt' lang=3De=
s-TRAD>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db =3D new clsDBconnector(&quot;test&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;query(&quot;BEGIN NOT ATOMIC</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>SET @VAR_DA=
TE =3D
'2018/01/01';SET @D_DATE =3D NULL;SET @D_TIME =3D NULL;SET @OPEN =3D NULL; =
</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>BEGIN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>-- Testing with MARIADB, version 10.1.29 </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
-------------------------------------------------------------------- </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span># please C=
heck
this. Block comments, internal embedded code, must use escape character </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>/* Inside =
comments
will not intefiering */ </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>DECLARE in=
_date
date DEFAULT null; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set in_dat=
e =3D
DATE_ADD(@VAR_DATE, INTERVAL 30 DAY); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>if in_date=
 &gt;
'2018-03-30' then </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>set @t=
ext_error =3D
concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date limit=
'); </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>    </span>SIGNAL=
 SQLSTATE
'45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>end if; </=
p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span></p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>SELECT d_d=
ate,
d_time, open </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>into @D_DA=
TE,
@D_TIME, @OPEN </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>FROM test.=
tmp_forex
</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>where d_da=
te =3D
in_date </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>limit 1; <=
/p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'>  </span>set @VAR_D=
ATE =3D
in_date; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>--
--------------------------------------------------------------------</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419><span style=3D'mso-spacerun:yes'> </span>SELECT @VAR=
_DATE as
var_date,@D_DATE as d_date,@D_TIME as d_time,@OPEN as open, 0 as nada; </p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>END; END;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&quot;);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>while ($db-&gt;next_record()) { # var_dump($db-&gt;Re=
cord);</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$var_date =3D $db-&gt;Record['var_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_date =3D $db-&gt;Record['d_date'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$d_time =3D $db-&gt;Record['d_time'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$open =3D $db-&gt;Record['open'] ;</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>}</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>$db-&gt;close();</p>

<p style=3D'margin:0in;margin-left:.375in;font-family:"Courier New";font-si=
ze:
11.0pt' lang=3Des-419>&nbsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Embedded code Vs. Generated code</span></p>

<div style=3D'direction:ltr'>

<table border=3D1 cellpadding=3D0 cellspacing=3D0 valign=3Dtop style=3D'dir=
ection:ltr;
 border-collapse:collapse;border-style:solid;border-color:#A3A3A3;border-wi=
dth:
 1pt'>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.0979in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
<span
  style=3D'font-weight:bold'>Embedded code</span></p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2361in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>=
<span
  style=3D'font-weight:bold'>Generated code</span></p>
  </td>
 </tr>
 <tr>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.0979in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>--
  --------------------------------------------------------------------</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>-- Testing with MARIADB, version 10.1.29</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>--
  --------------------------------------------------------------------</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'><span
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span># please </span=
><span
  lang=3Des-419>Check this. Block comments, internal embedded code, must use
  escape character</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'><span
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>/* Inside comme=
nts will
  not </span><span lang=3Des-419>intefiering </span><span lang=3Des-TRAD>*\=
/</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>DECLARE in_date=
 date
  DEFAULT null;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-TRAD><span
  style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set in=
_date =3D
  DATE_ADD(</span><span style=3D'color:#17365D'>:var_date</span><span
  style=3D'color:#76923C'>, INTERVAL 30 DAY);</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>if in_date &gt;
  '2018-03-30' then</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>set @text_e=
rror =3D
  concat('Error Managed by User:',cast(in_date as CHAR),' Exceeded Date
  limit');</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>    </span>SIGNAL SQLS=
TATE
  '45000' SET MYSQL_ERRNO =3D 31001, MESSAGE_TEXT =3D @text_error;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>end if;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>SELECT d_date, =
d_time,
  open</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>into :d_date, :=
d_time,
  :open</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>FROM test.tmp_f=
orex</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>where d_date =
=3D in_date</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD><span style=3D'mso-spacerun:yes'>  </span>limit 1;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-TRAD><span
  style=3D'color:#76923C'><span style=3D'mso-spacerun:yes'>  </span>set </=
span><span
  style=3D'color:#17365D'>:var_date</span><span style=3D'color:#76923C'> =
=3D in_date;</span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt;color:#7=
6923C'
  lang=3Des-TRAD>--
  --------------------------------------------------------------------</p>
  </td>
  <td style=3D'border-style:solid;border-color:#A3A3A3;border-width:1pt;
  vertical-align:top;width:5.2361in;padding:1.95pt 3.0pt 1.95pt 3.0pt'>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db
  =3D new clsDBconnector(&quot;test&quot;);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  =3D '';</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($var_date)) <span style=3D'color:#17365D'>$var_date</span>=3D&quo=
t;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('var_date').' =3D '.$db-&gt;ToSQL(<span style=3D'=
color:
  #17365D'>$var_date</span>,3).';';</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($d_date)) $d_date=3D&quot;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('d_date').' =3D '.$db-&gt;ToSQL($d_date,3).';';</=
p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($d_time)) $d_time=3D&quot;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('d_time').' =3D '.$db-&gt;ToSQL($d_time,3).';';</=
p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>if
  (!isset($open)) $open=3D&quot;&quot;;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$___BIND___
  .=3D 'SET @'.strtoupper('open').' =3D '.$db-&gt;ToSQL($open,3).';';</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$plsqlParsed['CASE2']-&gt;phpCodeToEval
  =3D str_replace('### BIND',$___BIND___,$plsqlParsed['CASE2']-&gt;phpCode)=
;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db
  =3D new clsDBconnector(&quot;test&quot;);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db-&gt;query(&quot;BEGIN
  NOT ATOMIC</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>&nbsp;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span>SET <span style=3D'color:#17365D'>@VA=
R_DATE</span>
  =3D '2018/01/01';SET @D_DATE =3D NULL;SET @D_TIME =3D NULL;SET @OPEN =3D =
NULL; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>BEGIN
  </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  -------------------------------------------------------------------- </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  Testing with MARIADB, version 10.1.29 </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  -------------------------------------------------------------------- </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span># please Check this. Block comments,
  internal embedded code, must use escape character </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>/* Inside comments will not intefier=
ing */ </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>DECLARE in_date date DEFAULT null; <=
/p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>set in_date =3D DATE_ADD(<span
  style=3D'color:#17365D'>@VAR_DATE</span>, INTERVAL 30 DAY); </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>if in_date &gt; '2018-03-30' then </=
p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>    </span>set @text_error =3D concat('Erro=
r Managed
  by User:',cast(in_date as CHAR),' Exceeded Date limit'); </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>    </span>SIGNAL SQLSTATE '45000' SET MYSQ=
L_ERRNO =3D
  31001, MESSAGE_TEXT =3D @text_error; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>end if; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span></p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>SELECT d_date, d_time, open </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>into @D_DATE, @D_TIME, @OPEN </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>FROM test.tmp_forex </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>where d_date =3D in_date </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>limit 1; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'>  </span>set <span style=3D'color:#17365D'>@V=
AR_DATE</span>
  =3D in_date; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>--
  --------------------------------------------------------------------</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'mso-spacerun:yes'> </span>SELECT @VAR_DATE as var_date,@D_DATE =
as
  d_date,@D_TIME as d_time,@OPEN as open, 0 as nada; </p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>END;
  END;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>&quot;);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>while
  ($db-&gt;next_record()) { # var_dump($db-&gt;Record);</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419><span
  style=3D'color:#17365D'>$var_date</span> =3D $db-&gt;Record['var_date'] ;=
</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$d_date
  =3D $db-&gt;Record['d_date'] ;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$d_time
  =3D $db-&gt;Record['d_time'] ;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$open
  =3D $db-&gt;Record['open'] ;</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>}</p>
  <p style=3D'margin:0in;font-family:"Courier New";font-size:8.0pt' lang=3D=
es-419>$db-&gt;close();</p>
  </td>
 </tr>
</table>

</div>

<p style=3D'margin:0in;font-family:Arial;font-size:8.0pt' lang=3Des-419><sp=
an
style=3D'font-weight:bold'>Note: $var_date tracking on blue char color.</sp=
an></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>Because the use of &quot;eval&quot;.</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Ev=
al has
been the only way I have found to execute a code dynamically. If any intere=
sted
reader has another method please comment.</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419><s=
pan
style=3D'font-weight:bold'>About the db_mariadbparser.php file</span></p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>Th=
is
script contains the precompiler logic in addition to everything needed to
connect to a MySql (MARIADB) database with &quot;mysqli&quot; drivers. It is
the summary within a single file of a group of multiple files that make up a
&quot;Generic DB Adapters&quot;, which has been simplified for the purpose =
of
testing this idea. This idea is experimental, in the testing phase and poss=
ibly
will be part of the integral development associated with… .. FRAMEWORK…=
</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>&n=
bsp;</p>

<p style=3D'margin:0in;font-family:Arial;font-size:10.0pt' lang=3Des-419>In=
 this
file you will find references to PL / SQL or ORACLE, from which the original
idea started and was tested in the same way as this. At the time of testing
with ORACLE, Mysql did not have the concept of executing instructions outsi=
de
of procedure or function. Mysql also does not have the concept of &quot;Bin=
ded
Variables&quot; as ORACLE does, the closest implementation is the associati=
on
by positioning and not by name of variables. Mysql (and MARIADB) have the
concept of User-Defined Variables which are used to simulate the &quot;Bind=
ed
Variables&quot;, if you notice, the generated code replaces the variables
preceded by &quot;:&quot; to variables preceded by &quot;@&quot; within the
embedded code.</p>

</div>

</div>

</div>

<div>

<p style=3D'margin:0in'>&nbsp;</p>

<p style=3D'text-align:left;margin:0in;font-family:Arial;font-size:9pt;
color:#969696;direction:ltr'>Created with Microsoft OneNote 2010<br>
One place for all your notes and information</p>

</div>

</body>

</html>
